import t,{oRef as n}from"ojs-core";class oView{constructor(config={}){this.html="",this.instanceID=config.id?config.id:`${(new Date).getTime()}${Math.floor(100*Math.random())}`,this.class=config.class||!1,this.instance=n()}components(){}build(){throw new Error("'Build' method is not implemented")}fetchData(url,method="GET",responseType="json"){return fetch(url,{method:method}).then((t=>"json"===responseType?t.json():"blob"===responseType?t.blob():void 0)).catch((t=>console.warn(t)))}rerender=()=>{try{const{target:t}=this.instance;if(!t)return;this.components();const n=this.build();t.innerHTML="",n instanceof HTMLElement?t.appendChild(n):n.forEach((n=>t.appendChild(n)))}catch(t){console.warn(t)}};init(){this.components();const n=this.build();if(n.length&&n[0]instanceof t)throw new Error("Probably you forgot use .init in build method");return this.html=t("div").ref(this.instance).id(this.instanceID).add([n]),this.class&&this.html.class(this.class),this.html.init()}}export default oView;